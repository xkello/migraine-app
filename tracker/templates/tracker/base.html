{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Migraine Tracker{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4j6/2Zl5GqN9z9E0h+XWZikM0WLa9g1M"
        crossorigin="anonymous">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  {% load static %}
  <link rel="stylesheet" href="{% static 'tracker/css/main.css' %}">
</head>
<body class="bg-dark text-light d-flex flex-column" style="min-height: 100vh; overflow-x: hidden" >

<header class="py-3 px-3">
  <h1 class="h4 mb-0">Migraine Tracker</h1>
</header>

<main class="flex-grow-1 px-3">
  {% block content %}{% endblock %}
</main>

<!-- Toast Container -->
<div id="toast-container" class="position-fixed top-0 start-50 translate-middle-x p-3" style="z-index: 10000;"></div>

<!-- Django Messages to JS -->
{% if messages %}
<script id="django-messages" type="application/json">
[
  {% for message in messages %}
  {
    "message": "{{ message|escapejs }}",
    "level_tag": "{{ message.tags }}"
  }{% if not forloop.last %},{% endif %}
  {% endfor %}
]
</script>
{% endif %}

<!-- Bottom navigation bar -->
<nav class="bottom-nav fixed-bottom">
  <div class="bottom-nav-inner">
    {% with active=active_tab|default:"home" %}

      <!-- Home -->
      <a class="nav-icon {% if active == 'home' %}nav-icon-active{% endif %}"
         href="{% url 'tracker:home' %}">
        <i class="bi bi-house-fill"></i>
        <span class="nav-label">Home</span>
      </a>

      <!-- Log (main action) -->
      <a class="nav-icon {% if active == 'log' %}nav-icon-active{% endif %}"
         href="{% url 'tracker:log' %}">
        <i class="bi bi-plus-lg"></i>
        <span class="nav-label">Log</span>
      </a>

      <!-- Profile -->
      <a class="nav-icon {% if active == 'profile' %}nav-icon-active{% endif %}"
         href="{% url 'tracker:profile' %}">
        <i class="bi bi-person-circle"></i>
        <span class="nav-label">Profile</span>
      </a>

    {% endwith %}
  </div>
</nav>


<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

<!-- Chart.js for graphs -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<script src="{% static 'tracker/js/main.js' %}"></script>

{% block extra_js %}{% endblock %}
</body>
</html>
